<include file="Index:header" />
<script  src="__PUBLIC__/Js/Util/Calendar.js"></script>
<tagLib name="cx,leishi" />
<script>
 //添加的
 function emailclick(){
   var email=document.getElementById("email").value;
   if(email==""){
    alert("邮箱不能为空!");
    return false;
  }else{
	 var telphone=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;
	     flag=telphone.test(email);
		 if(!flag){
		   alert('邮箱格式有误');return false;
		}
        else{
             window.location.href="__GROUP__/User/check/type/email?email="+email;
        }
  }
}

function phoneclick(){
   var phone=document.getElementById("mobile").value;
   if(phone==""){
      alert("手机号码不能为空!");
     return false;
  }else if(phone!=""){
         var telphone=/^1\d{10}$/;    //手机号码正则 只是对以一开头的匹配
	     flag=telphone.test(phone);
		 if(!flag){
		   alert('请填写正确的手机号码');return false;
		}else{
		   window.location.href="__GROUP__/User/check/type/mobile?mobile="+phone;
		}
  }
}

function Juge(myform)
{
    if(myform.account.value == "")
	{
		alert("用户不能为空!");
		myform.account.focus();
		return (false);
	}
         if(myform.password.value == "")
	{
		alert("密码不能为空!");
		myform.password.focus();
		return (false);
	}
	if(myform.email.value == "")
	{
		alert("邮箱不能为空!");
		myform.email.focus();
		return (false);
	}else{
	    var telphone=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;
	      flag=telphone.test(myform.email.value);
		  if(!flag){
		   alert('邮箱格式有误');return false;
		}
	}
	if(myform.birthday.value == "")
	{
		alert("生日不能为空!");
		myform.birthday.focus();
		return (false);
	}else{
	   var time=/[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}/
		flag=time.test(myform.birthday.value);
		if(!flag){
		   alert('请填写正确的日期'); return false;
		}
	}
	if(myform.realname.value == "")
	{
		alert("真实姓名不能为空!");
		myform.realname.focus();
		return (false);
	}else{
	    var name=/^[\u4e00-\u9fa5_a-zA-Z]+$/
		flag=name.test(myform.realname.value);
		if(!flag){
		   alert('姓名必须是中文或英文'); return false;
		}
	}
	if(myform.phone.value == "")
	{
		alert("请填写电话!");
		myform.phone.focus();
		return (false);
	}else{
	    var phone=/\d{7,14}$/;    //手机号码正则 只是对以一开头的匹配
	     flag=phone.test(myform.phone.value);
		 if(!flag){
		   alert('请填写正确的电话号码'); return false;
		} 
	}
	if(myform.mobile.value == "")
	{
		alert("请填写手机号码!");
		myform.mobile.focus();
		return (false);
	}else{
	 var telphone=/^1\d{10}$/;    //手机号码正则 只是对以一开头的匹配
	     flag=telphone.test(myform.mobile.value);
		 if(!flag){
		   alert('请填写正确的手机号码');return false;
		}
	}
	if(myform.zip_code.value == "")
	{
		alert("邮编不能为空!");
		myform.zip_code.focus();
		return (false);
	}
    else{
	    var zip_code=/^[0-9]\d{5}$/; 
	     flag=zip_code.test(myform.zip_code.value);
		 if(!flag){
		   alert('请填写正确的邮编'); return false;
		} 
	}
	if(myform.address.value == "")
	{
		alert("地址不能为空!");
		myform.address.focus();
		return (false);
	}
}
</script>
<div class="w96 ah">
	<div class="fl w71">
	<div class="box5-title">我的资料</div>
<div class="ad1">
<include file="User:left" />
<script>
$("ul.uilist li:first-child a").addClass("uc");
</script>
<div id="uinforight" class="box1">
<p class="titlen"><span></span></p>
<div class="box1-body">
<form id="form1" action="__APP__/User/update" method="post" onSubmit="return Juge(this)"> 
<table class="infotable" border="0" cellspacing="0" cellpadding="0" align="center">
<tr><td width="82">头&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;像</td><td width="322" valign="bottom">{$Think.session.uc_ava}<br /><a href="__GROUP__/User/avatar">修改头像</a></td></tr>
<tr><td>用&nbsp;户&nbsp;名</td><td><input name="account"  size="15" value="{$vo.account}" readonly="readonly"/></td></tr>
<tr><td>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码</td><td><input name="password" size="16" type="password"/><font color="red">（不修改填写原密码）</font></td></tr>
<tr><td>邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱</td><td><input name="email" size="15" id="email"  value="{$vo.email}" title="输入邮箱是为了方便我们联系您"/><eq name= "vo.email_if" value= "1" >已验证<else/><input type="button" value="验证邮箱" onClick="emailclick()"/></eq></td></tr>
<tr><td>性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别</td><td><select name="sex">
<option value="男">男</option>
<option value="女">女</option>
</select></td></tr>
<tr><td>生&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日</td><td><input name="birthday" size="15" onFocus="ShowCalendar(this)" value="{$vo.birthday|date='Y-m-d',###}"/></td></tr>
<tr><td>真实姓名</td><td><input name="realname" size="15" value="{$vo.realname}"/></td></tr>
<tr><td>联系电话</td><td><input name="phone" size="15" value="{$vo.phone}"/></td></tr>
<tr><td>手&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;机</td><td><input name="mobile"  id="mobile"  size="15" value="{$vo.mobile}" title="输入手机号向您发送即时消息"/><eq name= "vo.mobile_if" value= "1" >已验证<else/><input type="button" value="验证手机" onClick="phoneclick()"/></eq></td></tr>
<tr><td>邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;编</td><td><input name="zip_code" size="15" value="{$vo.zip_code}"/></td></tr>
<tr><td>地&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;址</td><td><input name="address"  size="25" value="{$vo.address}"/></td></tr>
<tr><td></td><td>
<input type="hidden" name="id" value="{$vo.id}" />
<input type="submit" value="修&nbsp;改" /></td></tr>

</table></form></div>
<p class="bottom"><span class="fl"></span><span class="fr"></span></p>
</div>
</div>
    </div>
    <div class="fr w24">
<include file="Index:news" />
<div class="ad1"><a href="#"><img src="__PUBLIC__/home_image/ad.jpg" /></a></div>
    </div>
</div>
<include file="Index:footer" />
